<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Phase Diagrams - 20 Questions</title>
    <style>
    :root{
      --bg: #0b0f14;
      --text: #e6edf3;
      --muted: #9aa7b2;
      --card: #0f1620;
      --border: #263241;
      --shadow: rgba(0,0,0,.25);

      --btn-bg: #162232;
      --btn-bg-hover: #1b2a3e;
      --btn-border: #2a3a4f;
      --btn-text: var(--text);

      --primary: #3b82f6;
      --primary-hover: #2563eb;

      --ok-bg: rgba(34, 197, 94, 0.12);
      --ok-border: rgba(34, 197, 94, 0.35);

      --bad-bg: rgba(239, 68, 68, 0.12);
      --bad-border: rgba(239, 68, 68, 0.35);

      --focus: rgba(59, 130, 246, 0.45);
    }

    /* Optional: if user prefers light mode, respect it */
    @media (prefers-color-scheme: light){
      :root{
        --bg: #ffffff;
        --text: #111827;
        --muted: #4b5563;
        --card: #ffffff;
        --border: #d1d5db;
        --shadow: rgba(0,0,0,.08);

        --btn-bg: #f3f4f6;
        --btn-bg-hover: #e5e7eb;
        --btn-border: #d1d5db;
        --btn-text: #111827;

        --primary: #1f6feb;
        --primary-hover: #1857bd;

        --ok-bg: #e9f7ef;
        --ok-border: #bfe7cd;

        --bad-bg: #fdecea;
        --bad-border: #f5c2bd;

        --focus: rgba(31, 111, 235, 0.35);
      }
    }

    *{ box-sizing: border-box; }
    body{
      font-family: Arial, sans-serif;
      margin: 24px;
      line-height: 1.4;
      background: var(--bg);
      color: var(--text);
    }
    .wrap { max-width: 800px; margin: 0 auto; }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 6px 18px var(--shadow);
    }

    .muted{ color: var(--muted); font-size: 0.95rem; }

    .q-title{ margin: 0 0 8px; }

    .choices{ list-style: none; padding: 0; margin: 0; }
    .choices li{ margin: 10px 0; }

    label{ cursor: pointer; }
    input[type="radio"]{
      accent-color: var(--primary);
      transform: translateY(1px);
    }

    /* Focus visibility */
    button:focus, input[type="radio"]:focus{
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    .btnrow{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button{
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: var(--btn-text);
      cursor: pointer;
    }
    button:hover{ background: var(--btn-bg-hover); }

    button.primary{
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    button.primary:hover{ background: var(--primary-hover); }

    .feedback{
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    .ok{ background: var(--ok-bg); border-color: var(--ok-border); }
    .bad{ background: var(--bad-bg); border-color: var(--bad-border); }

    .hidden{ display: none; }

    .progress{
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    .pill{
      padding: 4px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 0.9rem;
      background: rgba(255,255,255,.03);
    }

    .explain{ margin-top: 8px; }
  
    /* Fireworks overlay (shown only on 20/20) */
    canvas.fireworks{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

  </style>
</head>

<body>

<div class="quiz-header">
  <a href="../index.html" class="index-link" aria-label="Back to Home">← Back to Home</a>
</div>

<style>
  .quiz-header {
    max-width: 1100px;
    margin: 0 auto 12px auto;
    padding: 12px 16px 0 16px;
    display: flex;
    justify-content: flex-end;
  }

  .index-link {
    text-decoration: none;
    font-weight: 600;
    color: #eaeaf0;
    padding: 6px 10px;
    border-radius: 8px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.18);
  }

  .index-link:hover {
    background: rgba(255,255,255,0.14);
  }
</style>




  <canvas id="fireworks" class="fireworks" style="display:none;"></canvas>

  <div class="wrap">
     <h1>Phase Diagrams Quiz (20 questions)</h1>
    <p class="muted">Assesses students’ understanding of binary phase diagrams, including liquidus, solidus and solvus lines, eutectic and eutectoid reactions, phase regions, the lever rule, and Hume–Rothery rules for solid solubility, linking equilibrium phase transformations to microstructure and engineering material behaviour.</p>

    <div class="card progress">
      <div>
        <div class="pill" id="progressText">Question 1 of 1</div>
      </div>
      <div class="pill" id="scoreText">Score: 0</div>
    </div>

    <div class="card" id="quizCard">
      <h2 class="q-title" id="questionText">Loading…</h2>
      <p class="muted" id="questionMeta"></p>

      <form id="choicesForm">
        <ul class="choices" id="choicesList"></ul>
      </form>

      <div class="btnrow">
        <button class="primary" id="checkBtn" type="button">Check answer</button>
        <button id="nextBtn" type="button" class="hidden">Next</button>
        <button id="restartBtn" type="button">Restart</button>
      </div>

      <div id="feedbackBox" class="feedback hidden"></div>
    </div>

    <div class="card hidden" id="summaryCard">
      <h2>Results</h2>
      <p id="summaryText"></p>
      <button class="primary" id="restartBtn2" type="button">Restart quiz</button>
    </div>
  </div>

  <script>
    // =========================
    // 1) QUESTION BANK (EDIT ME)
    // =========================
    // correctIndex is 0-based (0 = A, 1 = B, etc.)
const QUESTIONS = [
  {
    topic: "Fundamentals",
    question: "What does a binary phase diagram typically show?",
    choices: [
      "Stress vs strain",
      "Temperature vs composition",
      "Time vs temperature",
      "Pressure vs volume"
    ],
    correctIndex: 1,
    explanation: "A binary phase diagram plots temperature against composition and shows which phases are stable under equilibrium conditions."
  },
  {
    topic: "Liquidus Line",
    question: "The liquidus line represents:",
    choices: [
      "The boundary below which material is fully solid",
      "The temperature above which material is fully liquid",
      "The start of plastic deformation",
      "The eutectoid reaction"
    ],
    correctIndex: 1,
    explanation: "Above the liquidus line, the alloy exists completely in the liquid phase."
  },
  {
    topic: "Solidus Line",
    question: "The solidus line marks:",
    choices: [
      "The temperature above which the alloy is fully liquid",
      "The temperature below which the alloy is completely solid",
      "The melting point of pure metals only",
      "The solubility limit"
    ],
    correctIndex: 1,
    explanation: "Below the solidus line, the material is entirely solid."
  },
  {
    topic: "Between Liquidus and Solidus",
    question: "What exists between the liquidus and solidus lines?",
    choices: [
      "Fully solid phase",
      "Fully liquid phase",
      "Mixture of solid and liquid",
      "Gas phase"
    ],
    correctIndex: 2,
    explanation: "Between these lines, the alloy exists as a mixture of solid and liquid phases."
  },
  {
    topic: "Eutectic Reaction",
    question: "A eutectic reaction is best described as:",
    choices: [
      "Liquid → Solid + Solid at a fixed temperature and composition",
      "Solid → Solid + Solid",
      "Liquid → Liquid + Solid",
      "Solid → Liquid"
    ],
    correctIndex: 0,
    explanation: "A eutectic reaction occurs when a liquid transforms into two different solid phases at a specific temperature and composition."
  },
  {
    topic: "Eutectic Point",
    question: "At the eutectic composition:",
    choices: [
      "Melting occurs over a temperature range",
      "The alloy solidifies at a single temperature",
      "The alloy remains partially liquid",
      "Only one solid phase forms"
    ],
    correctIndex: 1,
    explanation: "At the eutectic composition, the alloy solidifies at a single temperature, similar to a pure metal."
  },
  {
    topic: "Eutectoid Reaction",
    question: "A eutectoid reaction involves:",
    choices: [
      "Liquid transforming into two solids",
      "One solid transforming into two different solids",
      "Two liquids forming a solid",
      "Gas forming a solid"
    ],
    correctIndex: 1,
    explanation: "A eutectoid reaction involves one solid phase transforming into two new solid phases, such as austenite to ferrite + cementite in steel."
  },
  {
    topic: "Eutectic vs Eutectoid",
    question: "The key difference between eutectic and eutectoid reactions is:",
    choices: [
      "Eutectic involves liquid, eutectoid involves only solids",
      "Eutectoid involves melting",
      "They are identical",
      "Eutectic occurs at room temperature only"
    ],
    correctIndex: 0,
    explanation: "Eutectic reactions involve a liquid phase, whereas eutectoid reactions occur entirely in the solid state."
  },
  {
    topic: "Solvus Line",
    question: "The solvus line indicates:",
    choices: [
      "Melting temperature",
      "Limit of solid solubility",
      "Start of liquid formation",
      "Grain growth region"
    ],
    correctIndex: 1,
    explanation: "The solvus line defines the maximum solubility of one solid phase within another."
  },
  {
    topic: "Solid Solubility",
    question: "What happens when composition exceeds the solvus limit?",
    choices: [
      "Liquid forms",
      "A second solid phase precipitates",
      "Material becomes amorphous",
      "Material melts instantly"
    ],
    correctIndex: 1,
    explanation: "Exceeding the solvus limit results in precipitation of a second solid phase."
  },
  {
    topic: "Lever Rule",
    question: "The lever rule is used to determine:",
    choices: [
      "Phase temperatures",
      "Phase compositions",
      "Relative phase amounts in a two-phase region",
      "Grain size"
    ],
    correctIndex: 2,
    explanation: "The lever rule calculates the fraction of each phase present in a two-phase region."
  },
  {
    topic: "Hume–Rothery Rule 1",
    question: "According to Hume–Rothery rules, for extensive solid solubility the atomic size difference should be:",
    choices: [
      "Greater than 30%",
      "Less than about 15%",
      "Exactly equal",
      "Irrelevant"
    ],
    correctIndex: 1,
    explanation: "For high solid solubility, atomic radii should differ by less than approximately 15%."
  },
  {
    topic: "Hume–Rothery Rule 2",
    question: "Which factor promotes solid solubility according to Hume–Rothery?",
    choices: [
      "Different crystal structures",
      "Similar crystal structures",
      "Different valence only",
      "Large electronegativity difference"
    ],
    correctIndex: 1,
    explanation: "Similar crystal structures between solute and solvent promote substitutional solid solution formation."
  },
  {
    topic: "Hume–Rothery Rule 3",
    question: "Valence similarity influences:",
    choices: [
      "Electrical conductivity only",
      "Solid solubility between elements",
      "Melting point only",
      "Thermal expansion"
    ],
    correctIndex: 1,
    explanation: "Elements with similar valence are more likely to form extensive solid solutions."
  },
  {
    topic: "Phase Regions",
    question: "A single-phase region in a phase diagram indicates:",
    choices: [
      "Two phases coexist",
      "Material is unstable",
      "Only one phase is present",
      "Melting occurs"
    ],
    correctIndex: 2,
    explanation: "Within a single-phase region, only one stable phase exists at equilibrium."
  },
  {
    topic: "Cooling Path",
    question: "When cooling through a two-phase region:",
    choices: [
      "Composition of phases remains constant",
      "Phase compositions change along tie lines",
      "Liquid disappears instantly",
      "Material becomes brittle"
    ],
    correctIndex: 1,
    explanation: "As temperature decreases, the compositions of coexisting phases change along tie lines."
  },
  {
    topic: "Iron–Carbon",
    question: "In the iron–carbon diagram, the eutectoid reaction forms:",
    choices: [
      "Martensite",
      "Pearlite",
      "Ferrite only",
      "Cementite only"
    ],
    correctIndex: 1,
    explanation: "At the eutectoid composition (~0.76% C), austenite transforms into pearlite (ferrite + cementite)."
  },
  {
    topic: "Non-Equilibrium",
    question: "Phase diagrams assume:",
    choices: [
      "Rapid cooling",
      "Equilibrium (slow cooling)",
      "Constant stress",
      "No diffusion"
    ],
    correctIndex: 1,
    explanation: "Phase diagrams represent equilibrium conditions, typically achieved under slow cooling."
  },
  {
    topic: "Engineering Importance",
    question: "Why are phase diagrams important in materials engineering?",
    choices: [
      "They predict colour changes",
      "They predict phase stability and microstructure",
      "They measure stress directly",
      "They determine density only"
    ],
    correctIndex: 1,
    explanation: "Phase diagrams allow engineers to predict phase transformations, microstructures, and material properties."
  },
  {
    topic: "Eutectic Microstructure",
    question: "Eutectic microstructures are typically:",
    choices: [
      "Random and coarse",
      "Lamellar or finely mixed",
      "Fully amorphous",
      "Single-phase"
    ],
    correctIndex: 1,
    explanation: "Eutectic reactions often produce fine lamellar or alternating microstructures due to simultaneous solidification of two phases."
  }
];

    // =========================
    // 2) QUIZ ENGINE (NO NEED TO EDIT)
    // =========================
    let idx = 0;
    let score = 0;
    let answered = false; // prevent double scoring

    const progressText = document.getElementById("progressText");
    const scoreText = document.getElementById("scoreText");
    const questionText = document.getElementById("questionText");
    const questionMeta = document.getElementById("questionMeta");
    const choicesList = document.getElementById("choicesList");
    const feedbackBox = document.getElementById("feedbackBox");

    const checkBtn = document.getElementById("checkBtn");
    const nextBtn = document.getElementById("nextBtn");
    const restartBtn = document.getElementById("restartBtn");
    const restartBtn2 = document.getElementById("restartBtn2");

    const quizCard = document.getElementById("quizCard");
    const summaryCard = document.getElementById("summaryCard");
    const summaryText = document.getElementById("summaryText");

    function renderQuestion() {
      answered = false;
      feedbackBox.className = "feedback hidden";
      feedbackBox.innerHTML = "";
      nextBtn.classList.add("hidden");

      const q = QUESTIONS[idx];
      progressText.textContent = `Question ${idx + 1} of ${QUESTIONS.length}`;
      scoreText.textContent = `Score: ${score}`;
      questionText.textContent = q.question;
      questionMeta.textContent = q.topic ? `Topic: ${q.topic}` : "";

      // Build choices (radio buttons)
      choicesList.innerHTML = "";
      q.choices.forEach((choice, i) => {
        const li = document.createElement("li");
        const id = `q${idx}_c${i}`;
        li.innerHTML = `
          <label for="${id}">
            <input type="radio" name="choice" id="${id}" value="${i}" />
            ${choice}
          </label>
        `;
        choicesList.appendChild(li);
      });
    }

    function getSelectedIndex() {
      const selected = document.querySelector('input[name="choice"]:checked');
      return selected ? Number(selected.value) : null;
    }

    function lockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = true);
    }

    function unlockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = false);
    }

    function showFeedback(isCorrect, q) {
      feedbackBox.classList.remove("hidden");
      feedbackBox.classList.toggle("ok", isCorrect);
      feedbackBox.classList.toggle("bad", !isCorrect);

      const correctText = q.choices[q.correctIndex];
      feedbackBox.innerHTML = `
        <strong>${isCorrect ? "Correct!" : "Not quite."}</strong>
        <div class="explain">
          ${isCorrect ? "" : `Correct answer: <strong>${correctText}</strong><br/>`}
          ${q.explanation ? q.explanation : ""}
        </div>
      `;
    }


    // =========================
    // Fireworks (perfect score)
    // =========================
    const fwCanvas = document.getElementById("fireworks");
    const fwCtx = fwCanvas.getContext("2d");
    let fwRunning = false;
    let fwParticles = [];
    let fwAnimId = null;

    function resizeFireworks(){
      const dpr = window.devicePixelRatio || 1;
      fwCanvas.width = Math.floor(window.innerWidth * dpr);
      fwCanvas.height = Math.floor(window.innerHeight * dpr);
      fwCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    window.addEventListener("resize", () => {
      if (fwRunning) resizeFireworks();
    });

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnBurst(x, y){
      const count = Math.floor(rand(60, 120));
      for (let i = 0; i < count; i++){
        const angle = rand(0, Math.PI * 2);
        const speed = rand(1.5, 6.0);
        fwParticles.push({
          x, y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: rand(40, 90),
          maxLife: 0, // set below
          size: rand(1.2, 2.6),
          hue: rand(0, 360)
        });
      }
      // assign maxLife after creation so we can fade nicely
      for (let p of fwParticles){
        if (p.maxLife === 0) p.maxLife = p.life;
      }
    }

    function tickFireworks(){
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      // Occasionally spawn a new burst
      if (Math.random() < 0.08){
        spawnBurst(rand(window.innerWidth * 0.15, window.innerWidth * 0.85),
                  rand(window.innerHeight * 0.15, window.innerHeight * 0.55));
      }

      const gravity = 0.06;
      const drag = 0.985;

      fwParticles = fwParticles.filter(p => p.life > 0);
      for (let p of fwParticles){
        p.life -= 1;
        p.vx *= drag;
        p.vy = p.vy * drag + gravity;

        p.x += p.vx;
        p.y += p.vy;

        const t = p.life / p.maxLife; // 1..0
        const alpha = Math.max(0, Math.min(1, t));

        fwCtx.beginPath();
        fwCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        fwCtx.fillStyle = `hsla(${p.hue}, 100%, 60%, ${alpha})`;
        fwCtx.fill();
      }

      fwAnimId = requestAnimationFrame(tickFireworks);
    }

    function startFireworks(){
      if (fwRunning) return;
      fwRunning = true;
      fwParticles = [];
      fwCanvas.style.display = "block";
      resizeFireworks();

      // Kick off with a few bursts
      for (let i = 0; i < 4; i++){
        spawnBurst(rand(window.innerWidth * 0.2, window.innerWidth * 0.8),
                  rand(window.innerHeight * 0.2, window.innerHeight * 0.55));
      }

      tickFireworks();

      // Stop after ~6 seconds (keeps it fun, not annoying)
      setTimeout(stopFireworks, 6000);
    }

    function stopFireworks(){
      if (!fwRunning) return;
      fwRunning = false;
      if (fwAnimId) cancelAnimationFrame(fwAnimId);
      fwAnimId = null;
      fwParticles = [];
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      fwCanvas.style.display = "none";
    }


    function finishQuiz() {
      quizCard.classList.add("hidden");
      summaryCard.classList.remove("hidden");
      summaryText.textContent = `You scored ${score} out of ${QUESTIONS.length}.`;
      if (score === QUESTIONS.length) startFireworks();
    }

    function restartQuiz() {
      idx = 0;
      score = 0;
      answered = false;
      summaryCard.classList.add("hidden");
      quizCard.classList.remove("hidden");
      unlockChoices();
      renderQuestion();
    }

    checkBtn.addEventListener("click", () => {
      if (answered) return;

      const selectedIndex = getSelectedIndex();
      if (selectedIndex === null) {
        feedbackBox.className = "feedback bad";
        feedbackBox.textContent = "Please select an answer before checking.";
        return;
      }

      const q = QUESTIONS[idx];
      const isCorrect = selectedIndex === q.correctIndex;

      if (isCorrect) score += 1;
      answered = true;

      lockChoices();
      showFeedback(isCorrect, q);
      scoreText.textContent = `Score: ${score}`;
      nextBtn.classList.remove("hidden");
    });

    nextBtn.addEventListener("click", () => {
      idx += 1;
      if (idx >= QUESTIONS.length) {
        finishQuiz();
      } else {
        unlockChoices();
        renderQuestion();
      }
    });

    restartBtn.addEventListener("click", restartQuiz);
    restartBtn2.addEventListener("click", restartQuiz);

    // Start
    renderQuestion();
  </script>
</body>
</html>
