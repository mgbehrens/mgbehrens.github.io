<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Tool Steel Quiz - 20 Questions</title>
    <style>
    :root{
      --bg: #0b0f14;
      --text: #e6edf3;
      --muted: #9aa7b2;
      --card: #0f1620;
      --border: #263241;
      --shadow: rgba(0,0,0,.25);

      --btn-bg: #162232;
      --btn-bg-hover: #1b2a3e;
      --btn-border: #2a3a4f;
      --btn-text: var(--text);

      --primary: #3b82f6;
      --primary-hover: #2563eb;

      --ok-bg: rgba(34, 197, 94, 0.12);
      --ok-border: rgba(34, 197, 94, 0.35);

      --bad-bg: rgba(239, 68, 68, 0.12);
      --bad-border: rgba(239, 68, 68, 0.35);

      --focus: rgba(59, 130, 246, 0.45);
    }

    /* Optional: if user prefers light mode, respect it */
    @media (prefers-color-scheme: light){
      :root{
        --bg: #ffffff;
        --text: #111827;
        --muted: #4b5563;
        --card: #ffffff;
        --border: #d1d5db;
        --shadow: rgba(0,0,0,.08);

        --btn-bg: #f3f4f6;
        --btn-bg-hover: #e5e7eb;
        --btn-border: #d1d5db;
        --btn-text: #111827;

        --primary: #1f6feb;
        --primary-hover: #1857bd;

        --ok-bg: #e9f7ef;
        --ok-border: #bfe7cd;

        --bad-bg: #fdecea;
        --bad-border: #f5c2bd;

        --focus: rgba(31, 111, 235, 0.35);
      }
    }

    *{ box-sizing: border-box; }
    body{
      font-family: Arial, sans-serif;
      margin: 24px;
      line-height: 1.4;
      background: var(--bg);
      color: var(--text);
    }
    .wrap { max-width: 800px; margin: 0 auto; }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 6px 18px var(--shadow);
    }

    .muted{ color: var(--muted); font-size: 0.95rem; }

    .q-title{ margin: 0 0 8px; }

    .choices{ list-style: none; padding: 0; margin: 0; }
    .choices li{ margin: 10px 0; }

    label{ cursor: pointer; }
    input[type="radio"]{
      accent-color: var(--primary);
      transform: translateY(1px);
    }

    /* Focus visibility */
    button:focus, input[type="radio"]:focus{
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    .btnrow{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button{
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: var(--btn-text);
      cursor: pointer;
    }
    button:hover{ background: var(--btn-bg-hover); }

    button.primary{
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    button.primary:hover{ background: var(--primary-hover); }

    .feedback{
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    .ok{ background: var(--ok-bg); border-color: var(--ok-border); }
    .bad{ background: var(--bad-bg); border-color: var(--bad-border); }

    .hidden{ display: none; }

    .progress{
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    .pill{
      padding: 4px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 0.9rem;
      background: rgba(255,255,255,.03);
    }

    .explain{ margin-top: 8px; }
  
    /* Fireworks overlay (shown only on 20/20) */
    canvas.fireworks{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

  </style>
</head>

<body>

<div class="quiz-header">
  <a href="../index.html" class="index-link" aria-label="Back to Home">← Back to Home</a>
</div>

<style>
  .quiz-header {
    max-width: 1100px;
    margin: 0 auto 12px auto;
    padding: 12px 16px 0 16px;
    display: flex;
    justify-content: flex-end;
  }

  .index-link {
    text-decoration: none;
    font-weight: 600;
    color: #eaeaf0;
    padding: 6px 10px;
    border-radius: 8px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.18);
  }

  .index-link:hover {
    background: rgba(255,255,255,0.14);
  }
</style>




  <canvas id="fireworks" class="fireworks" style="display:none;"></canvas>

  <div class="wrap">
     <h1>Quiz 4: Tool Steels - Alloying Elements Focus (Advanced)</h1>
    <p class="muted">Focuses specifically on the role of individual alloying elements (e.g. C, Cr, Mo, V, W, Co, Ni, Mn, Si) and how they influence hardness, wear resistance, toughness, hardenability, and high-temperature performance.</p>

    <div class="card progress">
      <div>
        <div class="pill" id="progressText">Question 1 of 1</div>
      </div>
      <div class="pill" id="scoreText">Score: 0</div>
    </div>

    <div class="card" id="quizCard">
      <h2 class="q-title" id="questionText">Loading…</h2>
      <p class="muted" id="questionMeta"></p>

      <form id="choicesForm">
        <ul class="choices" id="choicesList"></ul>
      </form>

      <div class="btnrow">
        <button class="primary" id="checkBtn" type="button">Check answer</button>
        <button id="nextBtn" type="button" class="hidden">Next</button>
        <button id="restartBtn" type="button">Restart</button>
      </div>

      <div id="feedbackBox" class="feedback hidden"></div>
    </div>

    <div class="card hidden" id="summaryCard">
      <h2>Results</h2>
      <p id="summaryText"></p>
      <button class="primary" id="restartBtn2" type="button">Restart quiz</button>
    </div>
  </div>

  <script>
    // =========================
    // 1) QUESTION BANK (EDIT ME)
    // =========================
    // correctIndex is 0-based (0 = A, 1 = B, etc.)

  
    const QUESTIONS = [
  {
    topic: "Carbon (C)",
    question: "In tool steels, what is the MOST important role of carbon (C)?",
    choices: [
      "Improves electrical conductivity",
      "Enables martensite formation and provides carbon for carbide formation",
      "Prevents oxidation at high temperature",
      "Increases density and reduces distortion"
    ],
    correctIndex: 1,
    explanation: "Carbon is the key hardening element in tool steels. During quenching it allows the formation of martensite (a very hard, supersaturated microstructure). Carbon also supplies the 'fuel' for carbide formation (e.g., Fe3C and alloy carbides such as Cr-, V-, Mo-, and W-carbides). Higher carbon generally increases achievable hardness and wear resistance, but too much carbon can reduce toughness and increase cracking risk—especially if carbide networks form."
  },
  {
    topic: "Chromium (Cr)",
    question: "Chromium (Cr) is added to many tool steels primarily to:",
    choices: [
      "Increase wear resistance via chromium carbide formation and improve hardenability",
      "Make the steel non-magnetic",
      "Eliminate the need for tempering",
      "Increase ductility at room temperature"
    ],
    correctIndex: 0,
    explanation: "Chromium improves hardenability (deepens the hardening response so thicker sections can harden), and forms hard chromium carbides (e.g., Cr7C3 / Cr23C6) that boost wear resistance. In high-C, high-Cr steels (like D-type), the large volume of Cr carbides gives excellent abrasion resistance—but those carbides can reduce toughness and can contribute to chipping if impact loading is present."
  },
  {
    topic: "Vanadium (V)",
    question: "What is the most accurate statement about vanadium (V) in tool steels?",
    choices: [
      "It is mainly used to reduce cost",
      "It forms very hard vanadium carbides and refines grain size, improving wear resistance",
      "It increases corrosion resistance more than chromium",
      "It prevents martensite formation"
    ],
    correctIndex: 1,
    explanation: "Vanadium is a powerful carbide former. Vanadium carbides (VC) are extremely hard and contribute strongly to abrasion resistance and edge retention (especially in cutting tools and HSS). Vanadium also promotes grain refinement—fine grain size improves toughness and reduces cracking risk. Because V carbides are very stable, they help maintain performance at higher temperatures as well."
  },
  {
    topic: "Molybdenum (Mo)",
    question: "Molybdenum (Mo) is MOST associated with improving:",
    choices: [
      "Red (hot) hardness and resistance to temper softening",
      "Electrical insulation",
      "Low-temperature ductility only",
      "Surface polishability"
    ],
    correctIndex: 0,
    explanation: "Molybdenum improves high-temperature strength and helps tool steels resist temper softening (loss of hardness during tempering or hot service). It also increases hardenability and contributes to secondary hardening (formation of fine alloy carbides during tempering), which is a major reason Mo is valuable in hot-work tool steels and molybdenum-type HSS (e.g., M2)."
  },
  {
    topic: "Tungsten (W)",
    question: "Why is tungsten (W) commonly used in high-speed steels?",
    choices: [
      "It improves red hardness by forming stable carbides that resist softening at high temperature",
      "It makes steel softer so it can be machined after hardening",
      "It reduces hardenability so the core remains ductile",
      "It prevents carbide formation"
    ],
    correctIndex: 0,
    explanation: "Tungsten is a strong carbide former and a key contributor to red hardness. Tungsten carbides remain stable at elevated temperatures, allowing cutting tools to retain hardness and edge strength when frictional heating is high. In classic tungsten HSS (e.g., T1), W plays a major role in hot hardness; in practice, W and Mo often provide similar benefits, with Mo sometimes used to achieve comparable performance with lower density and different cost/availability."
  },
  {
    topic: "Cobalt (Co)",
    question: "Which statement best describes cobalt (Co) in some high-speed steels?",
    choices: [
      "Cobalt forms the hardest carbides in steel",
      "Cobalt increases hot hardness without being a carbide former",
      "Cobalt is added mainly to improve corrosion resistance",
      "Cobalt reduces hardness to improve toughness"
    ],
    correctIndex: 1,
    explanation: "Cobalt is not a carbide former, but it increases hot hardness and improves the steel’s ability to retain hardness at elevated temperatures (often by strengthening the matrix and enhancing secondary hardening response). Cobalt-bearing HSS grades (e.g., M35/M42 families) are commonly used where very high cutting temperatures occur. A trade-off is that higher hot hardness can come with reduced toughness and increased brittleness if not balanced carefully."
  },
  {
    topic: "Manganese (Mn)",
    question: "Manganese (Mn) in tool steels is most commonly used to:",
    choices: [
      "Increase hardenability and act as a deoxidiser, while improving strength",
      "Improve red hardness more than tungsten",
      "Replace carbon as the primary hardening element",
      "Increase carbide volume more than vanadium"
    ],
    correctIndex: 0,
    explanation: "Manganese is often used as a deoxidiser during steelmaking and it increases hardenability (helps the steel harden through thicker sections). Mn can also improve strength. However, excessive Mn can increase risk of brittleness or promote unwanted microstructures if heat treatment isn’t controlled. In tool steels, Mn is usually not the headline alloying element, but it supports reliable hardening response."
  },
  {
    topic: "Silicon (Si)",
    question: "Silicon (Si) in certain tool steels (especially shock-resistant steels) is valued because it:",
    choices: [
      "Increases toughness and improves temper resistance by strengthening the ferrite/matrix",
      "Eliminates the need for quenching",
      "Creates the primary wear-resistant carbides",
      "Makes steel stainless"
    ],
    correctIndex: 0,
    explanation: "Silicon strengthens the steel matrix and can improve temper resistance. In some tool steels (notably shock-resistant grades), Si contributes to resilience under impact and cyclic loading by strengthening the matrix without requiring huge carbide volumes. Silicon is also used as a deoxidiser in steelmaking. It does not form the main hard carbides responsible for abrasion resistance—that role belongs to elements like Cr, V, Mo, and W."
  },
  {
    topic: "Nickel (Ni)",
    question: "Nickel (Ni) is MOST associated with which effect in steels (including some tool-steel adjacent alloys)?",
    choices: [
      "Improving toughness and impact resistance by stabilising austenite and strengthening the matrix",
      "Forming extremely hard VC carbides",
      "Increasing wear resistance more than chromium carbides",
      "Greatly increasing red hardness like tungsten"
    ],
    correctIndex: 0,
    explanation: "Nickel is well known for improving toughness and impact resistance. It strengthens the matrix and can stabilise austenite, which can help absorb energy and resist brittle fracture. Nickel is not primarily a carbide-forming wear element, so it’s not the go-to choice for extreme abrasion resistance; it’s used more when toughness and impact performance are priorities."
  },
  {
    topic: "Sulphur (S) & Selenium (Se)",
    question: "Sulphur (S) and sometimes selenium (Se) are added in small amounts primarily to:",
    choices: [
      "Improve machinability by promoting inclusions that aid chip breaking",
      "Increase red hardness in cutting tools",
      "Increase toughness in impact service",
      "Prevent decarburisation during heat treatment"
    ],
    correctIndex: 0,
    explanation: "Sulphur improves machinability by forming sulphide inclusions (commonly MnS when Mn is present). These inclusions help break chips and reduce cutting forces. Selenium can be used similarly. The downside is that inclusions can reduce toughness and fatigue performance, so free-machining additions are used cautiously in tool steels—especially when the tool must resist impact or cyclic stresses."
  },
  {
    topic: "Phosphorus (P)",
    question: "Why is phosphorus (P) generally kept low in tool steels?",
    choices: [
      "It reduces electrical conductivity",
      "It can increase brittleness and reduce toughness (especially at grain boundaries)",
      "It prevents carbide formation",
      "It eliminates hardenability"
    ],
    correctIndex: 1,
    explanation: "Phosphorus tends to segregate at grain boundaries and can increase brittleness, reducing toughness. Tool steels often need a careful balance of hardness and toughness, so elements that promote brittle fracture are controlled. While small amounts may be unavoidable, low P is preferred for critical tooling applications."
  },
  {
    topic: "Carbide Formers",
    question: "Which group of alloying elements are the strongest carbide formers commonly used to boost wear resistance in tool steels?",
    choices: [
      "Cr, V, Mo, W",
      "Ni, Cu, Al, Sn",
      "Si, P, S, Pb",
      "C, H, O, N"
    ],
    correctIndex: 0,
    explanation: "Chromium, vanadium, molybdenum, and tungsten are classic carbide-forming elements in tool steels. Their carbides are hard and stable, significantly improving wear resistance and, for Mo/W, hot hardness. The exact carbide type, size, and distribution depend on chemistry and heat treatment—fine, well-distributed carbides improve wear without destroying toughness; coarse carbides can increase chipping risk."
  },
  {
    topic: "Hardenability vs Wear",
    question: "Which statement best distinguishes 'hardenability' from 'hardness' in tool steels?",
    choices: [
      "Hardenability is the maximum achievable Rockwell hardness",
      "Hardness is the ability to harden deep into a section; hardenability is surface hardness",
      "Hardenability describes how deep a steel can harden for a given quench; hardness is the resistance to indentation",
      "They are the same property"
    ],
    correctIndex: 2,
    explanation: "Hardness is a measured resistance to indentation (e.g., HRC). Hardenability is the ability to form hardened microstructures (martensite) through the thickness during cooling. Alloying elements like Cr, Mn, Mo, and Ni increase hardenability by slowing transformations during cooling, allowing thicker sections to harden with less severe quenches (reducing distortion and cracking)."
  },
  {
    topic: "Secondary Hardening",
    question: "Secondary hardening in tool steels is most closely associated with:",
    choices: [
      "Grain growth during tempering",
      "Precipitation of fine alloy carbides during tempering (often involving Mo, V, W)",
      "Complete dissolution of carbides during tempering",
      "Transforming martensite back to austenite permanently"
    ],
    correctIndex: 1,
    explanation: "Secondary hardening occurs when tempering causes fine alloy carbides to precipitate, increasing hardness in a certain tempering range. Elements like Mo, V, and W promote this by forming stable fine carbides. This is particularly important in HSS and hot-work steels, where tools must retain hardness after tempering and during hot service."
  },
  {
    topic: "Toughness Trade-offs",
    question: "Why can very high carbide volume (e.g., in high-C, high-Cr tool steels) reduce toughness?",
    choices: [
      "Carbides soften the matrix",
      "Carbides act as crack initiation sites and reduce the ability to absorb impact energy",
      "Carbides increase ductility and promote necking",
      "Carbides prevent martensite formation"
    ],
    correctIndex: 1,
    explanation: "Large, hard carbide populations increase abrasion resistance, but they can also concentrate stresses and act as crack initiation sites—especially under impact or bending. This makes the steel more prone to chipping and brittle fracture. Tool steel design is a balance: you want enough carbides for wear resistance, but not so many (or so coarse) that toughness becomes unacceptable."
  },
  {
    topic: "Grain Size Control",
    question: "Which alloying element is MOST well-known in tool steels for refining grain size and improving toughness through grain control?",
    choices: ["Vanadium", "Copper", "Sulphur", "Lead"],
    correctIndex: 0,
    explanation: "Vanadium is widely used for grain refinement. By forming stable vanadium carbides/nitrides, it pins grain boundaries and reduces grain growth during heat treatment. Finer grain size improves toughness and reduces cracking risk, while also supporting a stronger, more consistent hardened microstructure."
  },
  {
    topic: "Oxidation/Scaling at Heat",
    question: "In hot-work tool steels, which alloying element most directly helps resist oxidation/scaling during high-temperature exposure?",
    choices: ["Chromium", "Sulphur", "Phosphorus", "Lead"],
    correctIndex: 0,
    explanation: "Chromium improves oxidation resistance by promoting protective oxide films and by increasing the steel’s stability at elevated temperatures. In hot-work conditions (forging, die casting), oxidation and scaling can damage tool surfaces and accelerate wear. Chromium, combined with Mo and V for hot strength and temper resistance, is a key reason grades like H13 perform well."
  },
  {
    topic: "Machinability Additions",
    question: "If a tool steel grade is modified for free-machining, what is the most likely downside of adding elements like S/Se?",
    choices: [
      "Reduced wear resistance",
      "Reduced toughness and fatigue strength due to inclusions",
      "Reduced hardenability in thick sections",
      "Increased red hardness"
    ],
    correctIndex: 1,
    explanation: "Free-machining additions (S/Se) form inclusions that help chip control, but those inclusions can become stress raisers. That can reduce toughness and fatigue performance, increasing the risk of cracking or chipping under shock/cyclic loading. For tooling exposed to impact, these additions must be carefully controlled (or avoided)."
  }
];
   
    // =========================
    // 2) QUIZ ENGINE (NO NEED TO EDIT)
    // =========================
    let idx = 0;
    let score = 0;
    let answered = false; // prevent double scoring

    const progressText = document.getElementById("progressText");
    const scoreText = document.getElementById("scoreText");
    const questionText = document.getElementById("questionText");
    const questionMeta = document.getElementById("questionMeta");
    const choicesList = document.getElementById("choicesList");
    const feedbackBox = document.getElementById("feedbackBox");

    const checkBtn = document.getElementById("checkBtn");
    const nextBtn = document.getElementById("nextBtn");
    const restartBtn = document.getElementById("restartBtn");
    const restartBtn2 = document.getElementById("restartBtn2");

    const quizCard = document.getElementById("quizCard");
    const summaryCard = document.getElementById("summaryCard");
    const summaryText = document.getElementById("summaryText");

    function renderQuestion() {
      answered = false;
      feedbackBox.className = "feedback hidden";
      feedbackBox.innerHTML = "";
      nextBtn.classList.add("hidden");

      const q = QUESTIONS[idx];
      progressText.textContent = `Question ${idx + 1} of ${QUESTIONS.length}`;
      scoreText.textContent = `Score: ${score}`;
      questionText.textContent = q.question;
      questionMeta.textContent = q.topic ? `Topic: ${q.topic}` : "";

      // Build choices (radio buttons)
      choicesList.innerHTML = "";
      q.choices.forEach((choice, i) => {
        const li = document.createElement("li");
        const id = `q${idx}_c${i}`;
        li.innerHTML = `
          <label for="${id}">
            <input type="radio" name="choice" id="${id}" value="${i}" />
            ${choice}
          </label>
        `;
        choicesList.appendChild(li);
      });
    }

    function getSelectedIndex() {
      const selected = document.querySelector('input[name="choice"]:checked');
      return selected ? Number(selected.value) : null;
    }

    function lockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = true);
    }

    function unlockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = false);
    }

    function showFeedback(isCorrect, q) {
      feedbackBox.classList.remove("hidden");
      feedbackBox.classList.toggle("ok", isCorrect);
      feedbackBox.classList.toggle("bad", !isCorrect);

      const correctText = q.choices[q.correctIndex];
      feedbackBox.innerHTML = `
        <strong>${isCorrect ? "Correct!" : "Not quite."}</strong>
        <div class="explain">
          ${isCorrect ? "" : `Correct answer: <strong>${correctText}</strong><br/>`}
          ${q.explanation ? q.explanation : ""}
        </div>
      `;
    }


    // =========================
    // Fireworks (perfect score)
    // =========================
    const fwCanvas = document.getElementById("fireworks");
    const fwCtx = fwCanvas.getContext("2d");
    let fwRunning = false;
    let fwParticles = [];
    let fwAnimId = null;

    function resizeFireworks(){
      const dpr = window.devicePixelRatio || 1;
      fwCanvas.width = Math.floor(window.innerWidth * dpr);
      fwCanvas.height = Math.floor(window.innerHeight * dpr);
      fwCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    window.addEventListener("resize", () => {
      if (fwRunning) resizeFireworks();
    });

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnBurst(x, y){
      const count = Math.floor(rand(60, 120));
      for (let i = 0; i < count; i++){
        const angle = rand(0, Math.PI * 2);
        const speed = rand(1.5, 6.0);
        fwParticles.push({
          x, y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: rand(40, 90),
          maxLife: 0, // set below
          size: rand(1.2, 2.6),
          hue: rand(0, 360)
        });
      }
      // assign maxLife after creation so we can fade nicely
      for (let p of fwParticles){
        if (p.maxLife === 0) p.maxLife = p.life;
      }
    }

    function tickFireworks(){
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      // Occasionally spawn a new burst
      if (Math.random() < 0.08){
        spawnBurst(rand(window.innerWidth * 0.15, window.innerWidth * 0.85),
                  rand(window.innerHeight * 0.15, window.innerHeight * 0.55));
      }

      const gravity = 0.06;
      const drag = 0.985;

      fwParticles = fwParticles.filter(p => p.life > 0);
      for (let p of fwParticles){
        p.life -= 1;
        p.vx *= drag;
        p.vy = p.vy * drag + gravity;

        p.x += p.vx;
        p.y += p.vy;

        const t = p.life / p.maxLife; // 1..0
        const alpha = Math.max(0, Math.min(1, t));

        fwCtx.beginPath();
        fwCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        fwCtx.fillStyle = `hsla(${p.hue}, 100%, 60%, ${alpha})`;
        fwCtx.fill();
      }

      fwAnimId = requestAnimationFrame(tickFireworks);
    }

    function startFireworks(){
      if (fwRunning) return;
      fwRunning = true;
      fwParticles = [];
      fwCanvas.style.display = "block";
      resizeFireworks();

      // Kick off with a few bursts
      for (let i = 0; i < 4; i++){
        spawnBurst(rand(window.innerWidth * 0.2, window.innerWidth * 0.8),
                  rand(window.innerHeight * 0.2, window.innerHeight * 0.55));
      }

      tickFireworks();

      // Stop after ~6 seconds (keeps it fun, not annoying)
      setTimeout(stopFireworks, 6000);
    }

    function stopFireworks(){
      if (!fwRunning) return;
      fwRunning = false;
      if (fwAnimId) cancelAnimationFrame(fwAnimId);
      fwAnimId = null;
      fwParticles = [];
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      fwCanvas.style.display = "none";
    }


    function finishQuiz() {
      quizCard.classList.add("hidden");
      summaryCard.classList.remove("hidden");
      summaryText.textContent = `You scored ${score} out of ${QUESTIONS.length}.`;
      if (score === QUESTIONS.length) startFireworks();
    }

    function restartQuiz() {
      idx = 0;
      score = 0;
      answered = false;
      summaryCard.classList.add("hidden");
      quizCard.classList.remove("hidden");
      unlockChoices();
      renderQuestion();
    }

    checkBtn.addEventListener("click", () => {
      if (answered) return;

      const selectedIndex = getSelectedIndex();
      if (selectedIndex === null) {
        feedbackBox.className = "feedback bad";
        feedbackBox.textContent = "Please select an answer before checking.";
        return;
      }

      const q = QUESTIONS[idx];
      const isCorrect = selectedIndex === q.correctIndex;

      if (isCorrect) score += 1;
      answered = true;

      lockChoices();
      showFeedback(isCorrect, q);
      scoreText.textContent = `Score: ${score}`;
      nextBtn.classList.remove("hidden");
    });

    nextBtn.addEventListener("click", () => {
      idx += 1;
      if (idx >= QUESTIONS.length) {
        finishQuiz();
      } else {
        unlockChoices();
        renderQuestion();
      }
    });

    restartBtn.addEventListener("click", restartQuiz);
    restartBtn2.addEventListener("click", restartQuiz);

    // Start
    renderQuestion();
  </script>
</body>
</html>
