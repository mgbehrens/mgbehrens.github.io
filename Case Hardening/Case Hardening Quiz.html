<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Case Hardening Quiz - 20 Questions</title>
    <style>
    :root{
      --bg: #0b0f14;
      --text: #e6edf3;
      --muted: #9aa7b2;
      --card: #0f1620;
      --border: #263241;
      --shadow: rgba(0,0,0,.25);

      --btn-bg: #162232;
      --btn-bg-hover: #1b2a3e;
      --btn-border: #2a3a4f;
      --btn-text: var(--text);

      --primary: #3b82f6;
      --primary-hover: #2563eb;

      --ok-bg: rgba(34, 197, 94, 0.12);
      --ok-border: rgba(34, 197, 94, 0.35);

      --bad-bg: rgba(239, 68, 68, 0.12);
      --bad-border: rgba(239, 68, 68, 0.35);

      --focus: rgba(59, 130, 246, 0.45);
    }

    /* Optional: if user prefers light mode, respect it */
    @media (prefers-color-scheme: light){
      :root{
        --bg: #ffffff;
        --text: #111827;
        --muted: #4b5563;
        --card: #ffffff;
        --border: #d1d5db;
        --shadow: rgba(0,0,0,.08);

        --btn-bg: #f3f4f6;
        --btn-bg-hover: #e5e7eb;
        --btn-border: #d1d5db;
        --btn-text: #111827;

        --primary: #1f6feb;
        --primary-hover: #1857bd;

        --ok-bg: #e9f7ef;
        --ok-border: #bfe7cd;

        --bad-bg: #fdecea;
        --bad-border: #f5c2bd;

        --focus: rgba(31, 111, 235, 0.35);
      }
    }

    *{ box-sizing: border-box; }
    body{
      font-family: Arial, sans-serif;
      margin: 24px;
      line-height: 1.4;
      background: var(--bg);
      color: var(--text);
    }
    .wrap { max-width: 800px; margin: 0 auto; }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 6px 18px var(--shadow);
    }

    .muted{ color: var(--muted); font-size: 0.95rem; }

    .q-title{ margin: 0 0 8px; }

    .choices{ list-style: none; padding: 0; margin: 0; }
    .choices li{ margin: 10px 0; }

    label{ cursor: pointer; }
    input[type="radio"]{
      accent-color: var(--primary);
      transform: translateY(1px);
    }

    /* Focus visibility */
    button:focus, input[type="radio"]:focus{
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    .btnrow{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button{
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: var(--btn-text);
      cursor: pointer;
    }
    button:hover{ background: var(--btn-bg-hover); }

    button.primary{
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    button.primary:hover{ background: var(--primary-hover); }

    .feedback{
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    .ok{ background: var(--ok-bg); border-color: var(--ok-border); }
    .bad{ background: var(--bad-bg); border-color: var(--bad-border); }

    .hidden{ display: none; }

    .progress{
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    .pill{
      padding: 4px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 0.9rem;
      background: rgba(255,255,255,.03);
    }

    .explain{ margin-top: 8px; }
  
    /* Fireworks overlay (shown only on 20/20) */
    canvas.fireworks{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

  </style>
</head>

<body>

<div class="quiz-header">
  <a href="../index.html" class="index-link" aria-label="Back to Home">← Back to Home</a>
</div>

<style>
  .quiz-header {
    max-width: 1100px;
    margin: 0 auto 12px auto;
    padding: 12px 16px 0 16px;
    display: flex;
    justify-content: flex-end;
  }

  .index-link {
    text-decoration: none;
    font-weight: 600;
    color: #eaeaf0;
    padding: 6px 10px;
    border-radius: 8px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.18);
  }

  .index-link:hover {
    background: rgba(255,255,255,0.14);
  }
</style>




  <canvas id="fireworks" class="fireworks" style="display:none;"></canvas>

  <div class="wrap">
     <h1>Case Hardening Quiz (20 questions)</h1>
    <p class="muted">Assesses students’ understanding of case hardening processes such as carburising, carbonitriding, nitriding, and surface hardening methods, linking diffusion, microstructure, and heat treatment to surface hardness, core toughness, wear resistance, and typical engineering applications.</p>

    <div class="card progress">
      <div>
        <div class="pill" id="progressText">Question 1 of 1</div>
      </div>
      <div class="pill" id="scoreText">Score: 0</div>
    </div>

    <div class="card" id="quizCard">
      <h2 class="q-title" id="questionText">Loading…</h2>
      <p class="muted" id="questionMeta"></p>

      <form id="choicesForm">
        <ul class="choices" id="choicesList"></ul>
      </form>

      <div class="btnrow">
        <button class="primary" id="checkBtn" type="button">Check answer</button>
        <button id="nextBtn" type="button" class="hidden">Next</button>
        <button id="restartBtn" type="button">Restart</button>
      </div>

      <div id="feedbackBox" class="feedback hidden"></div>
    </div>

    <div class="card hidden" id="summaryCard">
      <h2>Results</h2>
      <p id="summaryText"></p>
      <button class="primary" id="restartBtn2" type="button">Restart quiz</button>
    </div>
  </div>

  <script>
    // =========================
    // 1) QUESTION BANK (EDIT ME)
    // =========================
    // correctIndex is 0-based (0 = A, 1 = B, etc.)
const QUESTIONS = [
  {
    topic: "Definition",
    question: "What is meant by case hardening?",
    choices: [
      "Hardening the entire cross-section of a component",
      "Increasing surface hardness while retaining a tough core",
      "Annealing the surface layer only",
      "Applying a hard coating to the surface"
    ],
    correctIndex: 1,
    explanation: "Case hardening is a heat treatment process that produces a hard, wear-resistant surface (case) while maintaining a softer, tougher core to resist impact and shock loads."
  },
  {
    topic: "Purpose",
    question: "Why is a tough core desirable in a case-hardened component?",
    choices: [
      "To improve corrosion resistance",
      "To prevent brittle fracture under impact or shock loading",
      "To increase surface hardness",
      "To reduce manufacturing cost"
    ],
    correctIndex: 1,
    explanation: "A tough core allows the component to absorb impact and cyclic stresses without cracking, while the hard case provides wear resistance."
  },
  {
    topic: "Carbon Content",
    question: "Which type of steel is MOST suitable for carburising?",
    choices: [
      "High-carbon steel",
      "Medium-carbon steel",
      "Low-carbon steel",
      "Tool steel"
    ],
    correctIndex: 2,
    explanation: "Low-carbon steels are ideal for carburising because carbon is added to the surface while the core remains low in carbon and therefore tough."
  },
  {
    topic: "Carburising",
    question: "What element is added to the surface during carburising?",
    choices: ["Nitrogen", "Carbon", "Chromium", "Boron"],
    correctIndex: 1,
    explanation: "Carburising enriches the surface layer with carbon, which allows the surface to form hard martensite after quenching."
  },
  {
    topic: "Carburising Temperature",
    question: "Carburising is typically carried out at temperatures:",
    choices: [
      "Below the eutectoid temperature",
      "Within the austenite region",
      "Below room temperature",
      "Only during quenching"
    ],
    correctIndex: 1,
    explanation: "Carburising is performed in the austenitic region so carbon can diffuse into the steel lattice."
  },
  {
    topic: "Case Depth",
    question: "What primarily controls the depth of the hardened case?",
    choices: [
      "Quenching medium",
      "Carburising temperature and time",
      "Surface finish",
      "Grain size only"
    ],
    correctIndex: 1,
    explanation: "Case depth increases with higher temperature and longer treatment time due to increased carbon diffusion."
  },
  {
    topic: "Quenching",
    question: "Why is quenching required after carburising?",
    choices: [
      "To remove excess carbon",
      "To form martensite in the carbon-rich surface layer",
      "To soften the core",
      "To reduce grain size only"
    ],
    correctIndex: 1,
    explanation: "Rapid quenching transforms the high-carbon surface austenite into hard martensite, producing the desired hard case."
  },
  {
    topic: "Microstructure",
    question: "What microstructure is typically present in the hardened case after carburising and quenching?",
    choices: [
      "Ferrite",
      "Pearlite",
      "Martensite",
      "Austenite only"
    ],
    correctIndex: 2,
    explanation: "The carbon-enriched surface transforms to martensite on quenching, providing high hardness and wear resistance."
  },
  {
    topic: "Core Microstructure",
    question: "What microstructure is typically found in the core of a carburised component?",
    choices: [
      "High-carbon martensite",
      "Low-carbon martensite or ferrite/pearlite",
      "Cementite",
      "Retained austenite only"
    ],
    correctIndex: 1,
    explanation: "The low-carbon core does not harden as much and remains relatively soft and tough, often ferrite/pearlite or low-carbon martensite."
  },
  {
    topic: "Carbonitriding",
    question: "Carbonitriding differs from carburising because it introduces:",
    choices: [
      "Only carbon",
      "Only nitrogen",
      "Both carbon and nitrogen",
      "Chromium and nitrogen"
    ],
    correctIndex: 2,
    explanation: "Carbonitriding adds both carbon and nitrogen, producing a hard case at lower temperatures and shorter times than carburising."
  },
  {
    topic: "Nitriding",
    question: "What element is diffused into the surface during nitriding?",
    choices: ["Carbon", "Nitrogen", "Hydrogen", "Oxygen"],
    correctIndex: 1,
    explanation: "Nitriding introduces nitrogen into the surface, forming hard nitride compounds without the need for quenching."
  },
  {
    topic: "Nitriding Temperature",
    question: "Compared to carburising, nitriding is typically carried out at:",
    choices: [
      "Higher temperatures",
      "Similar temperatures",
      "Lower temperatures",
      "Cryogenic temperatures"
    ],
    correctIndex: 2,
    explanation: "Nitriding is performed at relatively low temperatures, reducing distortion and eliminating the need for quenching."
  },
  {
    topic: "Distortion",
    question: "Which case hardening process generally causes the LEAST distortion?",
    choices: [
      "Carburising",
      "Carbonitriding",
      "Nitriding",
      "Flame hardening"
    ],
    correctIndex: 2,
    explanation: "Nitriding does not require quenching, so it minimises thermal stresses and distortion."
  },
  {
    topic: "Flame Hardening",
    question: "Flame hardening differs from carburising because it:",
    choices: [
      "Adds carbon to the surface",
      "Uses rapid surface heating and quenching without changing composition",
      "Is performed in a furnace",
      "Produces a very deep case"
    ],
    correctIndex: 1,
    explanation: "Flame hardening relies on rapid surface heating and quenching of medium-carbon steel, not carbon diffusion."
  },
  {
    topic: "Induction Hardening",
    question: "Which principle is used in induction hardening?",
    choices: [
      "Chemical diffusion",
      "Resistance heating",
      "Electromagnetic induction heating",
      "Radiation heating"
    ],
    correctIndex: 2,
    explanation: "Induction hardening uses electromagnetic fields to rapidly heat the surface layer, followed by quenching."
  },
  {
    topic: "Steel Selection",
    question: "Why are alloying elements such as chromium and molybdenum beneficial in case-hardened steels?",
    choices: [
      "They reduce carbon diffusion",
      "They improve hardenability and wear resistance",
      "They eliminate the need for quenching",
      "They soften the surface"
    ],
    correctIndex: 1,
    explanation: "Alloying elements improve hardenability, allowing a deeper and more uniform hardened case."
  },
  {
    topic: "Residual Stresses",
    question: "Case hardening often introduces compressive residual stresses at the surface. Why is this beneficial?",
    choices: [
      "It increases density",
      "It improves fatigue resistance",
      "It reduces hardness",
      "It increases thermal expansion"
    ],
    correctIndex: 1,
    explanation: "Compressive surface stresses help delay crack initiation and growth, improving fatigue performance."
  },
  {
    topic: "Applications",
    question: "Which component is MOST likely to be case hardened?",
    choices: [
      "Pressure vessel shell",
      "Gear or camshaft",
      "Structural beam",
      "Heat exchanger tube"
    ],
    correctIndex: 1,
    explanation: "Gears and camshafts require high surface wear resistance and a tough core, making them ideal for case hardening."
  },
  {
    topic: "Wear Resistance",
    question: "The improved wear resistance of case-hardened components is primarily due to:",
    choices: [
      "Grain refinement only",
      "Formation of hard martensite or nitrides at the surface",
      "Reduced carbon content",
      "Increased ductility"
    ],
    correctIndex: 1,
    explanation: "The hard surface microstructure resists abrasion, contact stress, and surface fatigue."
  },
  {
    topic: "Engineering Significance",
    question: "Why is case hardening an important heat treatment in engineering design?",
    choices: [
      "It reduces component weight",
      "It allows optimisation of surface and core properties",
      "It eliminates all forms of failure",
      "It improves corrosion resistance only"
    ],
    correctIndex: 1,
    explanation: "Case hardening allows engineers to tailor surface hardness and wear resistance while retaining core toughness, optimising performance for demanding applications."
  }
];

    // =========================
    // 2) QUIZ ENGINE (NO NEED TO EDIT)
    // =========================
    let idx = 0;
    let score = 0;
    let answered = false; // prevent double scoring

    const progressText = document.getElementById("progressText");
    const scoreText = document.getElementById("scoreText");
    const questionText = document.getElementById("questionText");
    const questionMeta = document.getElementById("questionMeta");
    const choicesList = document.getElementById("choicesList");
    const feedbackBox = document.getElementById("feedbackBox");

    const checkBtn = document.getElementById("checkBtn");
    const nextBtn = document.getElementById("nextBtn");
    const restartBtn = document.getElementById("restartBtn");
    const restartBtn2 = document.getElementById("restartBtn2");

    const quizCard = document.getElementById("quizCard");
    const summaryCard = document.getElementById("summaryCard");
    const summaryText = document.getElementById("summaryText");

    function renderQuestion() {
      answered = false;
      feedbackBox.className = "feedback hidden";
      feedbackBox.innerHTML = "";
      nextBtn.classList.add("hidden");

      const q = QUESTIONS[idx];
      progressText.textContent = `Question ${idx + 1} of ${QUESTIONS.length}`;
      scoreText.textContent = `Score: ${score}`;
      questionText.textContent = q.question;
      questionMeta.textContent = q.topic ? `Topic: ${q.topic}` : "";

      // Build choices (radio buttons)
      choicesList.innerHTML = "";
      q.choices.forEach((choice, i) => {
        const li = document.createElement("li");
        const id = `q${idx}_c${i}`;
        li.innerHTML = `
          <label for="${id}">
            <input type="radio" name="choice" id="${id}" value="${i}" />
            ${choice}
          </label>
        `;
        choicesList.appendChild(li);
      });
    }

    function getSelectedIndex() {
      const selected = document.querySelector('input[name="choice"]:checked');
      return selected ? Number(selected.value) : null;
    }

    function lockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = true);
    }

    function unlockChoices() {
      document.querySelectorAll('input[name="choice"]').forEach(el => el.disabled = false);
    }

    function showFeedback(isCorrect, q) {
      feedbackBox.classList.remove("hidden");
      feedbackBox.classList.toggle("ok", isCorrect);
      feedbackBox.classList.toggle("bad", !isCorrect);

      const correctText = q.choices[q.correctIndex];
      feedbackBox.innerHTML = `
        <strong>${isCorrect ? "Correct!" : "Not quite."}</strong>
        <div class="explain">
          ${isCorrect ? "" : `Correct answer: <strong>${correctText}</strong><br/>`}
          ${q.explanation ? q.explanation : ""}
        </div>
      `;
    }


    // =========================
    // Fireworks (perfect score)
    // =========================
    const fwCanvas = document.getElementById("fireworks");
    const fwCtx = fwCanvas.getContext("2d");
    let fwRunning = false;
    let fwParticles = [];
    let fwAnimId = null;

    function resizeFireworks(){
      const dpr = window.devicePixelRatio || 1;
      fwCanvas.width = Math.floor(window.innerWidth * dpr);
      fwCanvas.height = Math.floor(window.innerHeight * dpr);
      fwCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    window.addEventListener("resize", () => {
      if (fwRunning) resizeFireworks();
    });

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnBurst(x, y){
      const count = Math.floor(rand(60, 120));
      for (let i = 0; i < count; i++){
        const angle = rand(0, Math.PI * 2);
        const speed = rand(1.5, 6.0);
        fwParticles.push({
          x, y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: rand(40, 90),
          maxLife: 0, // set below
          size: rand(1.2, 2.6),
          hue: rand(0, 360)
        });
      }
      // assign maxLife after creation so we can fade nicely
      for (let p of fwParticles){
        if (p.maxLife === 0) p.maxLife = p.life;
      }
    }

    function tickFireworks(){
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      // Occasionally spawn a new burst
      if (Math.random() < 0.08){
        spawnBurst(rand(window.innerWidth * 0.15, window.innerWidth * 0.85),
                  rand(window.innerHeight * 0.15, window.innerHeight * 0.55));
      }

      const gravity = 0.06;
      const drag = 0.985;

      fwParticles = fwParticles.filter(p => p.life > 0);
      for (let p of fwParticles){
        p.life -= 1;
        p.vx *= drag;
        p.vy = p.vy * drag + gravity;

        p.x += p.vx;
        p.y += p.vy;

        const t = p.life / p.maxLife; // 1..0
        const alpha = Math.max(0, Math.min(1, t));

        fwCtx.beginPath();
        fwCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        fwCtx.fillStyle = `hsla(${p.hue}, 100%, 60%, ${alpha})`;
        fwCtx.fill();
      }

      fwAnimId = requestAnimationFrame(tickFireworks);
    }

    function startFireworks(){
      if (fwRunning) return;
      fwRunning = true;
      fwParticles = [];
      fwCanvas.style.display = "block";
      resizeFireworks();

      // Kick off with a few bursts
      for (let i = 0; i < 4; i++){
        spawnBurst(rand(window.innerWidth * 0.2, window.innerWidth * 0.8),
                  rand(window.innerHeight * 0.2, window.innerHeight * 0.55));
      }

      tickFireworks();

      // Stop after ~6 seconds (keeps it fun, not annoying)
      setTimeout(stopFireworks, 6000);
    }

    function stopFireworks(){
      if (!fwRunning) return;
      fwRunning = false;
      if (fwAnimId) cancelAnimationFrame(fwAnimId);
      fwAnimId = null;
      fwParticles = [];
      fwCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      fwCanvas.style.display = "none";
    }


    function finishQuiz() {
      quizCard.classList.add("hidden");
      summaryCard.classList.remove("hidden");
      summaryText.textContent = `You scored ${score} out of ${QUESTIONS.length}.`;
      if (score === QUESTIONS.length) startFireworks();
    }

    function restartQuiz() {
      idx = 0;
      score = 0;
      answered = false;
      summaryCard.classList.add("hidden");
      quizCard.classList.remove("hidden");
      unlockChoices();
      renderQuestion();
    }

    checkBtn.addEventListener("click", () => {
      if (answered) return;

      const selectedIndex = getSelectedIndex();
      if (selectedIndex === null) {
        feedbackBox.className = "feedback bad";
        feedbackBox.textContent = "Please select an answer before checking.";
        return;
      }

      const q = QUESTIONS[idx];
      const isCorrect = selectedIndex === q.correctIndex;

      if (isCorrect) score += 1;
      answered = true;

      lockChoices();
      showFeedback(isCorrect, q);
      scoreText.textContent = `Score: ${score}`;
      nextBtn.classList.remove("hidden");
    });

    nextBtn.addEventListener("click", () => {
      idx += 1;
      if (idx >= QUESTIONS.length) {
        finishQuiz();
      } else {
        unlockChoices();
        renderQuestion();
      }
    });

    restartBtn.addEventListener("click", restartQuiz);
    restartBtn2.addEventListener("click", restartQuiz);

    // Start
    renderQuestion();
  </script>
</body>
</html>
